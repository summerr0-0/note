<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-02-22T22:52:43.592426"><title>변하는 것과 변하지 않는 것 구분하기 | main</title><script type="application/json" id="virtual-toc-data">[{"id":"13ceaa20_2","level":0,"title":"식과 문 분리하기","anchor":"#13ceaa20_2"},{"id":"13ceaa20_15","level":0,"title":"순수함수 / 부수효과 나누기","anchor":"#13ceaa20_15"},{"id":"13ceaa20_29","level":0,"title":"데이터 / 계산 / 액션 구분하기","anchor":"#13ceaa20_29"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="변하는 것과 변하지 않는 것 구분하기 | main"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="main Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="변하는-것과-변하지-않는-것-구분하기.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="변하는 것과 변하지 않는 것 구분하기 | main"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "변하는-것과-변하지-않는-것-구분하기.html#webpage",
    "url": "변하는-것과-변하지-않는-것-구분하기.html",
    "name": "변하는 것과 변하지 않는 것 구분하기 | main",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "/#website",
    "url": "/",
    "name": "main Help"
}</script><!-- End Schema.org --></head><body data-id="변하는-것과-변하지-않는-것-구분하기" data-main-title="변하는 것과 변하지 않는 것 구분하기" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="javascript.md|javascript"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>main  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="변하는-것과-변하지-않는-것-구분하기" id="변하는-것과-변하지-않는-것-구분하기.md">변하는 것과 변하지 않는 것 구분하기</h1><section class="chapter"><h2 id="13ceaa20_2" data-toc="13ceaa20_2">식과 문 분리하기</h2><ul class="list _ul" id="13ceaa20_3"><li class="list__item" id="13ceaa20_4"><p>식 (Expression) : 값을 생성하고 반환한다. 식은 또 다른 식의 일부가 된다</p></li><li class="list__item" id="13ceaa20_5"><p>문 (Statement) : 프로그램의 행동을 지시하며 값을 반환하지 않는다 </p><ul class="list _ul" id="13ceaa20_6"><li class="list__item" id="13ceaa20_7"><p>의미론적으로는 코드의 흐름을 제어하거나 변수를 선언하는 등의 역할을 수행함.</p></li></ul></li></ul><div class="code-block" data-lang="javascript">
function printAdultStatus(age: number): void {
  age &gt;= 18 &amp;&amp; console.log(&quot;You are an adult.&quot;); 
}
</div><ul class="list _ul" id="13ceaa20_9"><li class="list__item" id="13ceaa20_10"><p>식 : <code class="code" id="13ceaa20_11">age &gt;= 18</code></p></li><li class="list__item" id="13ceaa20_12"><p>문 : <code class="code" id="13ceaa20_13">console.log()</code></p></li><li class="list__item" id="13ceaa20_14"><p>문법적으로는 틀리지 않을 수 있지만 식과 문을 구분하지 않아서 복잡성이 증가했다</p></li></ul></section><section class="chapter"><h2 id="13ceaa20_15" data-toc="13ceaa20_15">순수함수 / 부수효과 나누기</h2><ul class="list _ul" id="13ceaa20_16"><li class="list__item" id="13ceaa20_17"><p id="13ceaa20_18">순수함수</p><ul class="list _ul" id="13ceaa20_19"><li class="list__item" id="13ceaa20_20"><p>입력 값에 대해 항상 동일한 값을 반환한다</p></li><li class="list__item" id="13ceaa20_21"><p>부수효과가 없는 함수다</p></li></ul><div class="code-block" data-lang="javascript">
const add = (a, b) =&gt; a + b
</div></li><li class="list__item" id="13ceaa20_23"><p id="13ceaa20_24">부수효과</p><ul class="list _ul" id="13ceaa20_25"><li class="list__item" id="13ceaa20_26"><p>외부세계에 영향을 주는 행위가 포함되어있다</p></li><li class="list__item" id="13ceaa20_27"><p>fetch 함수로 외부api를 요청하는 것도 부수효과다</p></li><li class="list__item" id="13ceaa20_28"><p>React는 이러한 부수 효과를 일으키는 장소로서 useEffect 를 제공하고 있다.</p></li></ul></li></ul></section><section class="chapter"><h2 id="13ceaa20_29" data-toc="13ceaa20_29">데이터 / 계산 / 액션 구분하기</h2><ul class="list _ul" id="13ceaa20_30"><li class="list__item" id="13ceaa20_31"><p id="13ceaa20_32">데이터</p><ul class="list _ul" id="13ceaa20_33"><li class="list__item" id="13ceaa20_34"><p>이벤트에 대한 사실. 문자열, 객체 등 단순한 값 그 자체</p></li><li class="list__item" id="13ceaa20_35"><p>사용자가 입력한 이메일 주소</p></li></ul></li><li class="list__item" id="13ceaa20_36"><p id="13ceaa20_37">계산</p><ul class="list _ul" id="13ceaa20_38"><li class="list__item" id="13ceaa20_39"><p>입력으로 얻은 출력. 순수 함수, 수학 함수</p></li><li class="list__item" id="13ceaa20_40"><p>검증로직, 필터</p></li></ul></li><li class="list__item" id="13ceaa20_41"><p id="13ceaa20_42">액션</p><ul class="list _ul" id="13ceaa20_43"><li class="list__item" id="13ceaa20_44"><p>외부 세계와 소통하므로 실행 시점과 횟수에 의존. 부수 효과를 일으킨다</p></li><li class="list__item" id="13ceaa20_45"><p>이메일 보내기, 데이터 읽어오기</p></li></ul></li><li class="list__item" id="13ceaa20_46"><p id="13ceaa20_47">데이터, 계산으로부터 액션 분리하자</p><ul class="list _ul" id="13ceaa20_48"><li class="list__item" id="13ceaa20_49"><p id="13ceaa20_50">계산은 외부에 영향을 주지 않는다</p><ul class="list _ul" id="13ceaa20_51"><li class="list__item" id="13ceaa20_52"><p>쉽게 테스트를 할 수 있게 된다</p></li><li class="list__item" id="13ceaa20_53"><p>테스트를 여러번 해도 문제가 생기지 않는다</p></li></ul></li><li class="list__item" id="13ceaa20_54"><p id="13ceaa20_55">액션은 외부에 영향을 받는다</p><ul class="list _ul" id="13ceaa20_56"><li class="list__item" id="13ceaa20_57"><p>실행 시점, 횟수에 따라 다른 결과가 나올 수 있다</p></li><li class="list__item" id="13ceaa20_58"><p>외부와 의존적이기 때문에 재현이 어렵다</p></li></ul></li></ul></li><li class="list__item" id="13ceaa20_59"><p id="13ceaa20_60">Email 검증 로직으로 액션 알아보기</p></li></ul><div class="code-block" data-lang="javascript">
type Email = string;

const validateAndSendEmail = async (email: Email, content: string) =&gt; {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (emailRegex.test(email)) {
    console.log(`Sending email to ${email}: ${content}`);
    // 메시지 전송
    await new Promise(resolve =&gt; setTimeout(resolve, 1000));
  } else {
    console.error(&quot;Invalid email address&quot;);
  }
}
</div><ul class="list _ul" id="13ceaa20_62"><li class="list__item" id="13ceaa20_63"><p id="13ceaa20_64">이메일을 전송하고 api call을 한다</p></li><li class="list__item" id="13ceaa20_65"><p id="13ceaa20_66">api call(액션)이 들어가게 되면</p><ul class="list _ul" id="13ceaa20_67"><li class="list__item" id="13ceaa20_68"><p>테스트가 어렵고 (외부 api와 항상 연결되어 있어야 한다)</p></li><li class="list__item" id="13ceaa20_69"><p>재사용이 어렵다 (이 함수를 사용하면 무조건 api call을 해야된다)</p></li></ul></li><li class="list__item" id="13ceaa20_70"><p id="13ceaa20_71">계산과 액션 분리하기</p></li></ul><div class="code-block" data-lang="javascript">

type Email = string;

// 계산: 이메일 유효성 검사
function isValidEmail(email: Email): boolean {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
}

// 액션: 이메일 보내기
async function sendEmail(email: Email, content: string): Promise&lt;void&gt; {
  console.log(`Sending email to ${email}: ${content}`);
  // 예시를 위한 가상의 비동기 처리
  await new Promise(resolve =&gt; setTimeout(resolve, 1000));
}

// 계산과 액션을 조합
async function validateAndSendEmail(email: Email, content: string): Promise&lt;void&gt; {
  if (isValidEmail(email)) {
    await sendEmail(email, content);
  } else {
    console.error(&quot;Invalid email address&quot;);
  }
}

</div><ul class="list _ul" id="13ceaa20_73"><li class="list__item" id="13ceaa20_74"><p id="13ceaa20_75"><code class="code" id="13ceaa20_76">validateAndSendEmail</code> 도 액션 함수다</p><ul class="list _ul" id="13ceaa20_77"><li class="list__item" id="13ceaa20_78"><p>내부에 액션함수를 가지고 있기 때문에 그걸 가지고 있는 함수도 액션함수가 된다</p></li><li class="list__item" id="13ceaa20_79"><p>액션은 전염되기 때문에 주의해야 한다</p></li></ul></li><li class="list__item" id="13ceaa20_80"><p id="13ceaa20_81">todo app에서 액션과 계산 구분해보기</p></li></ul><div class="code-block" data-lang="javascript">
 import React, { useState } from 'react';

const TodoList = () =&gt; {
  const [todos, setTodos] = useState([]);
  const [input, setInput] = useState('');
  const [filter, setFilter] = useState('all'); // all, completed, incomplete
  const [searchQuery, setSearchQuery] = useState('');

  // 액션 -&gt; 배열에 데이터를 추가 (데이터가 변경된다) 
  const addTodo = () =&gt; {
    const newTodo = { text: input, completed: false };
    setTodos([...todos, newTodo]);
    setInput('');
  };

  //액션  -&gt; 데이터를 변경한다
  const toggleComplete = (index) =&gt; {
    const newTodos = [...todos];
    newTodos[index].completed = !newTodos[index].completed;
    setTodos(newTodos);
  };

  //계산 -&gt; 필터를 한다
  const filterTodos = () =&gt; {
    if (filter === 'completed') {
			return todos.filter((todo) =&gt; todo.completed);
		}
    if (filter === 'incomplete') {
			return todos.filter((todo) =&gt; !todo.completed);
		}
    return todos;
  };

  //계산 -&gt; searchQuery를 기반으로 필터
  const searchTodos = () =&gt; {
    return filterTodos().filter((todo) =&gt; todo.text.includes(searchQuery));
  };

  return (
    &lt;&gt;
      &lt;input value={input} onChange={(e) =&gt; setInput(e.target.value)} /&gt;
      &lt;button onClick={addTodo}&gt;Add&lt;/button&gt;
      &lt;button onClick={() =&gt; setFilter('all')}&gt;Show All&lt;/button&gt;
      &lt;button onClick={() =&gt; setFilter('completed')}&gt;Show Completed&lt;/button&gt;
      &lt;button onClick={() =&gt; setFilter('incomplete')}&gt;Show Incomplete&lt;/button&gt;
      &lt;input
        placeholder=&quot;Search...&quot;
        onChange={(e) =&gt; setSearchQuery(e.target.value)}
      /&gt;
      &lt;ul&gt;
        {searchTodos().map((todo, index) =&gt; (
          &lt;li key={index}&gt;
            {todo.text}{' '}
            &lt;button onClick={() =&gt; toggleComplete(index)}&gt;
              {todo.completed ? 'Undo' : 'Complete'}
            &lt;/button&gt;
          &lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/&gt;
  );
};

export default TodoList;

</div><ul class="list _ul" id="13ceaa20_83"><li class="list__item" id="13ceaa20_84"><p>영향도가 없는 계산들은 컴포넌트 밖으로 분리해도 된다</p></li><li class="list__item" id="13ceaa20_85"><p>액션은 부수효과가 있고 컴포넌트 의존적이기 때문에 컴포넌트 안에 있어야 한다</p></li></ul></section><div class="last-modified">Last modified: 22 2월 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="비즈니스로직-격리하기.html" class="navigation-links__prev">비즈니스로직 격리하기</a><a href="why-need-nextjs.html" class="navigation-links__next">why need nextjs</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>
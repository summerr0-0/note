<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-02-22T22:52:43.393088"><title>ch.8 | main</title><script type="application/json" id="virtual-toc-data">[{"id":"1","level":0,"title":"1. 의존성 이해하기","anchor":"#1"},{"id":"2","level":0,"title":"2. 유연한 설계","anchor":"#2"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="ch.8 | main"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="main Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="ch-8.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="ch.8 | main"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "ch-8.html#webpage",
    "url": "ch-8.html",
    "name": "ch.8 | main",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "/#website",
    "url": "/",
    "name": "main Help"
}</script><!-- End Schema.org --></head><body data-id="ch-8" data-main-title="ch.8" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="architecture.md|architecture///book-object.md|book-object"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>main  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="ch-8" id="ch-8.md">ch.8</h1><section class="chapter"><h2 id="1" data-toc="1">1. 의존성 이해하기</h2><section class="chapter"><h3 id="f3c9a89e_2" data-toc="f3c9a89e_2">변경과 의존성</h3><ul class="list _ul" id="f3c9a89e_3"><li class="list__item" id="f3c9a89e_4"><p id="f3c9a89e_5">의존성은 실행시점과 구현시점이 다르다</p></li><li class="list__item" id="f3c9a89e_6"><p id="f3c9a89e_7">실행시점 : 정상 동작을 위해 실행시점에 객체가 필요하다</p></li><li class="list__item" id="f3c9a89e_8"><p id="f3c9a89e_9">구현시점 : 의존 대상 객체가 변경될 경우 의존하는 객체도 같이 변경된다</p></li><li class="list__item" id="f3c9a89e_10"><p id="f3c9a89e_11">의존성이 존재한다의 의미</p><ul class="list _ul" id="f3c9a89e_12"><li class="list__item" id="f3c9a89e_13"><p>객체가 작업을 수행할 때 다른 객체가 필요한 경우</p></li><li class="list__item" id="f3c9a89e_14"><p>의존성은 방향성이 있으며 단방향이다</p></li><li class="list__item" id="f3c9a89e_15"><p>자신이 의존하는 대상이 바뀌면 나도 바뀔 수 있다 </p><ul class="list _ul" id="f3c9a89e_16"><li class="list__item" id="f3c9a89e_17"><p>Screening 이 변경되면 PeriodCondition 도 같이 바뀔 수 있다</p></li></ul></li></ul></li></ul></section><section class="chapter"><h3 id="f3c9a89e_18" data-toc="f3c9a89e_18">의존성 전이</h3><ul class="list _ul" id="f3c9a89e_19"><li class="list__item" id="f3c9a89e_20"><p>직접 의존성 </p><ul class="list _ul" id="f3c9a89e_21"><li class="list__item" id="f3c9a89e_22"><p>한 요소가 다른 요소에 직접 의존</p></li></ul></li><li class="list__item" id="f3c9a89e_23"><p>간접 의존성 </p><ul class="list _ul" id="f3c9a89e_24"><li class="list__item" id="f3c9a89e_25"><p>직접적인 관계는 없음</p></li><li class="list__item" id="f3c9a89e_26"><p>의존성 전이에 의해 영향이 전파된다</p></li><li class="list__item" id="f3c9a89e_27"><p>PeriodCondition 은 Screening 에 의존</p></li><li class="list__item" id="f3c9a89e_28"><p>Screening 은 Movie 에 의존</p></li><li class="list__item" id="f3c9a89e_29"><p>PeriodCondition 은 Movie 에 간접적으로 의존한다</p></li></ul></li></ul></section><section class="chapter"><h3 id="f3c9a89e_30" data-toc="f3c9a89e_30">런타임 의존성과 컴파일타임 의존성</h3><ul class="list _ul" id="f3c9a89e_31"><li class="list__item" id="f3c9a89e_32"><p>런타임 의존성 </p><ul class="list _ul" id="f3c9a89e_33"><li class="list__item" id="f3c9a89e_34"><p>애플리케이션이 실행되는 시점</p></li><li class="list__item" id="f3c9a89e_35"><p>객체사이의 의존성</p></li></ul></li><li class="list__item" id="f3c9a89e_36"><p>컴파일타임 의존성 </p><ul class="list _ul" id="f3c9a89e_37"><li class="list__item" id="f3c9a89e_38"><p>작성된 코드를 컴파일하는 시점</p></li><li class="list__item" id="f3c9a89e_39"><p>클래스 사이의 의존성</p></li></ul></li><li class="list__item" id="f3c9a89e_40"><p>컴파일 타임 구조와 런타임 구조 사이의 거리가 멀수록 설계가 유연해진다 </p><ul class="list _ul" id="f3c9a89e_41"><li class="list__item" id="f3c9a89e_42"><p>구현체에 의존하면 설계가 유연하지 못하다는 뜻</p></li><li class="list__item" id="f3c9a89e_43"><p>DiscountPolity - 컴파일 시점 의존</p></li><li class="list__item" id="f3c9a89e_44"><p>PercentDiscountPolicy, AmountDiscountPolicy - 런타임 시점 의존</p></li></ul></li></ul></section><section class="chapter"><h3 id="f3c9a89e_45" data-toc="f3c9a89e_45">컨텍스트 독립성</h3><ul class="list _ul" id="f3c9a89e_46"><li class="list__item" id="f3c9a89e_47"><p>특정한 문맥에 최소한의 가정으로 이루어져 있으면 다른 문맥에서 재사용하기 쉽다 </p><ul class="list _ul" id="f3c9a89e_48"><li class="list__item" id="f3c9a89e_49"><p>퍼센트로 할인율 계산해줘(x)</p></li><li class="list__item" id="f3c9a89e_50"><p>할인율 계산해줘 (o)</p></li></ul></li><li class="list__item" id="f3c9a89e_51"><p>유연한 설계를 위해서는 가능한 구체적인 정보를 적게 알아야 한다</p></li><li class="list__item" id="f3c9a89e_52"><p>구체클래스에 의존하지 말자</p></li></ul></section><section class="chapter"><h3 id="f3c9a89e_53" data-toc="f3c9a89e_53">의존성 해결하기</h3><ul class="list _ul" id="f3c9a89e_54"><li class="list__item" id="f3c9a89e_55"><p>의존성 해결 </p><ul class="list _ul" id="f3c9a89e_56"><li class="list__item" id="f3c9a89e_57"><p>컴파일타임 의존성은 구체적인 런타임 의존성으로 바뀌는 것</p></li><li class="list__item" id="f3c9a89e_58"><p>컴파일 시점에는 DiscountPolicy 런타임 시점에는 PercentDiscountPolicy, AmountDiscountPolicy 로 교체</p></li></ul></li><li class="list__item" id="f3c9a89e_59"><p>의존성 해결 방법 </p><ul class="list _ul" id="f3c9a89e_60"><li class="list__item" id="f3c9a89e_61"><p>생성자로 해결 : 객체를 생성하는 시점에 생성자를 통해 </p><ul class="list _ul" id="f3c9a89e_62"><li class="list__item" id="f3c9a89e_63"><p>생성자에 인스턴스를 전달해서 의존성을 해결한다</p></li></ul></li><li class="list__item" id="f3c9a89e_64"><p>수정자로 해결 : 객체 생성 후 setter 메서드를 통해 </p><ul class="list _ul" id="f3c9a89e_65"><li class="list__item" id="f3c9a89e_66"><p>setter를 이용해 실행시점에 의존대상을 바꾼다 - 유연한 변경 가능</p></li><li class="list__item" id="f3c9a89e_67"><p>set 하기 전에 해당 인스턴스 변수를 사용하면 NPE가 발생함</p></li><li class="list__item" id="f3c9a89e_68"><p>안정을 위해 생성자로 먼저 생성 후 set으로 변경하기</p></li></ul></li><li class="list__item" id="f3c9a89e_69"><p>메서드로 해결 : 메서드 실행 시 인자를 이용해 해결 </p><ul class="list _ul" id="f3c9a89e_70"><li class="list__item" id="f3c9a89e_71"><p>파라미터를 통해 전달되어서 메서드가 실행되는 동안만 일시적으로 의존이 생기는 것</p></li><li class="list__item" id="f3c9a89e_72"><p>자주 사용하는 객체는 생성자/수정자를 이용하는 것이 좋다</p></li></ul></li></ul></li></ul></section></section><section class="chapter"><h2 id="2" data-toc="2">2. 유연한 설계</h2><section class="chapter"><h3 id="f3c9a89e_73" data-toc="f3c9a89e_73">의존성과 결합도</h3><ul class="list _ul" id="f3c9a89e_74"><li class="list__item" id="f3c9a89e_75"><p>협력은 의존성을 만들고 과한 의존성은 재사용을 어렵게 만든다</p></li><li class="list__item" id="f3c9a89e_76"><p>바람직한 의존성은 재사용할 수 있는 의존성이다 </p><ul class="list _ul" id="f3c9a89e_77"><li class="list__item" id="f3c9a89e_78"><p>특정 컨텍스트에 강하게 의존하면 재사용 불가능 </p><ul class="list _ul" id="f3c9a89e_79"><li class="list__item" id="f3c9a89e_80"><p>PercentDiscountPolicy, AmountDiscountPolicy 에 강하게 결합하면 후에 재사용이어려움 </p><ul class="list _ul" id="f3c9a89e_81"><li class="list__item" id="f3c9a89e_82"><p>할인정책을 바꿀 때 수정이 무조건 필요해짐</p></li></ul></li></ul></li></ul></li><li class="list__item" id="f3c9a89e_83"><p>느슨한 결합도를 유지하도록 하자</p></li><li class="list__item" id="f3c9a89e_84"><p>의존성과 결합도 </p><ul class="list _ul" id="f3c9a89e_85"><li class="list__item" id="f3c9a89e_86"><p>의존성 - 두 객체의 관계유무 </p><ul class="list _ul" id="f3c9a89e_87"><li class="list__item" id="f3c9a89e_88"><p>의존성이 있다 / 없다</p></li></ul></li><li class="list__item" id="f3c9a89e_89"><p>결합도 - 의존성의 정도를 상대적으로 표현 </p><ul class="list _ul" id="f3c9a89e_90"><li class="list__item" id="f3c9a89e_91"><p>결합도가 강핟 / 느슨하다</p></li></ul></li></ul></li></ul></section><section class="chapter"><h3 id="f3c9a89e_92" data-toc="f3c9a89e_92">지식이 결합을 낳는다</h3><ul class="list _ul" id="f3c9a89e_93"><li class="list__item" id="f3c9a89e_94"><p>많이 알 수록 많이 결합된다</p></li><li class="list__item" id="f3c9a89e_95"><p>추상화를 통해서 정보를 감출 수 있다 </p><ul class="list _ul" id="f3c9a89e_96"><li class="list__item" id="f3c9a89e_97"><p>PercentDiscountPolicy 로 계산해줘 (x)</p></li><li class="list__item" id="f3c9a89e_98"><p>DiscountPolicy 계산해줘 (o)</p></li><li class="list__item" id="f3c9a89e_99"><p>어떤식으로 할인을 계산하는지 알필요 없다. 그냥 할인 요금을 계산하는 것만 알면 된다</p></li></ul></li></ul></section><section class="chapter"><h3 id="f3c9a89e_100" data-toc="f3c9a89e_100">추상화에 의존하라</h3><ul class="list _ul" id="f3c9a89e_101"><li class="list__item" id="f3c9a89e_102"><p>추상화 : 절차나 물체를 감추면서 복잡도를 줄이는 것</p></li><li class="list__item" id="f3c9a89e_103"><p>불필요한 정보를 감춰 결합도를 느슨하게 유지할 수 있다</p></li><li class="list__item" id="f3c9a89e_104"><p>의존대상 구분법 </p><ul class="list _ul" id="f3c9a89e_105"><li class="list__item" id="f3c9a89e_106"><p>구체 클래스 의존성</p></li><li class="list__item" id="f3c9a89e_107"><p>추상 클래스 의존성</p></li><li class="list__item" id="f3c9a89e_108"><p>인터페이스 의존성</p></li></ul></li><li class="list__item" id="f3c9a89e_109"><p>구체 클래스보다 추상클래스, 추상클래스보다 인터페이스 의존성이 결합도가 더 낮다</p></li></ul></section><section class="chapter"><h3 id="f3c9a89e_110" data-toc="f3c9a89e_110">명시적인 의존성</h3><ul class="list _ul" id="f3c9a89e_111"><li class="list__item" id="f3c9a89e_112"><p id="f3c9a89e_113">숨겨진 의존성</p><ul class="list _ul" id="f3c9a89e_114"><li class="list__item" id="f3c9a89e_115"><p><code class="code" id="f3c9a89e_116">Movie</code> 생성자에서 <code class="code" id="f3c9a89e_117">this.discountPolicy = new AmountDiscountPolicy</code></p></li><li class="list__item" id="f3c9a89e_118"><p>DiscountPolicy 와 AmountDiscountPolicy 둘 다 의존이 생기는 것</p></li></ul></li><li class="list__item" id="f3c9a89e_119"><p id="f3c9a89e_120">명시적 의존성</p><ul class="list _ul" id="f3c9a89e_121"><li class="list__item" id="f3c9a89e_122"><p>퍼블릭 인터페이스에 의존성을 노출하는 것</p></li><li class="list__item" id="f3c9a89e_123"><p><code class="code" id="f3c9a89e_124">Movie</code> 생성자에서 <code class="code" id="f3c9a89e_125">this.discountPolicy = discountPolicy</code></p><ul class="list _ul" id="f3c9a89e_126"><li class="list__item" id="f3c9a89e_127"><p>외부에서 discountPolicy의 구현체를 인자로 전달받는다</p></li></ul></li></ul></li><li class="list__item" id="f3c9a89e_128"><p id="f3c9a89e_129">의존성을 숨기지 마라</p><ul class="list _ul" id="f3c9a89e_130"><li class="list__item" id="f3c9a89e_131"><p>숨기면 내부 구현을 직접 봐야한다</p></li><li class="list__item" id="f3c9a89e_132"><p>재사용을 하기가 어려워진다</p></li></ul></li></ul></section><section class="chapter"><h3 id="new" data-toc="new">new는 해롭다</h3><ul class="list _ul" id="f3c9a89e_133"><li class="list__item" id="f3c9a89e_134"><p>new가 결합도측면에서 어려운 이유 </p><ul class="list _ul" id="f3c9a89e_135"><li class="list__item" id="f3c9a89e_136"><p><code class="code" id="f3c9a89e_137">new AmountDiscountPolicy</code> 처럼 구체 클래스 이름을 직접게 된다 </p><ul class="list _ul" id="f3c9a89e_138"><li class="list__item" id="f3c9a89e_139"><p>구체 클래스에 의존도가 생긴다</p></li></ul></li><li class="list__item" id="f3c9a89e_140"><p><code class="code" id="f3c9a89e_141">new AmountDiscountPolicy(인자1, 인자2...)</code></p><ul class="list _ul" id="f3c9a89e_142"><li class="list__item" id="f3c9a89e_143"><p>인자와 생성자 호출도 알게 된다 -&gt; 지식의 양이 늘어난다</p></li></ul></li></ul></li><li class="list__item" id="f3c9a89e_144"><p>인스턴스를 생성하는 로직과 인스턴스를 사용하는 로직을 분리하기 </p><ul class="list _ul" id="f3c9a89e_145"><li class="list__item" id="f3c9a89e_146"><p>외부에서 이미 생성된 인스턴스를 전달받기</p></li><li class="list__item" id="f3c9a89e_147"><p>Movie 는 discountPolicy 를 사용하는 책임만 있고 discountPolicy 생성 책임은 Movie의 클라이언트가 가진다</p></li></ul></li></ul></section><section class="chapter"><h3 id="f3c9a89e_148" data-toc="f3c9a89e_148">가끔은 생성해도 무방하다</h3><ul class="list _ul" id="f3c9a89e_149"><li class="list__item" id="f3c9a89e_150"><p>협력하고 싶은 기본 객체를 설정할 경우 안에서 생성해도 된다 </p><ul class="list _ul" id="f3c9a89e_151"><li class="list__item" id="f3c9a89e_152"><p>대부분 <code class="code" id="f3c9a89e_153">AmountDiscountPolicy</code> 를 사용하고 가끔만 <code class="code" id="f3c9a89e_154">PercentDiscountPolicy</code> 를 사용하는 경우 </p><ul class="list _ul" id="f3c9a89e_155"><li class="list__item" id="f3c9a89e_156"><p>매번 생성자에 같은 값을 넣게된다 -&gt; 코드 중복이 발생한다</p></li></ul></li><li class="list__item" id="f3c9a89e_157"><p>생성자에 <code class="code" id="f3c9a89e_158">new AmountDiscountPolicy</code> 를 넣는다. </p><ul class="list _ul" id="f3c9a89e_159"><li class="list__item" id="f3c9a89e_160"><p>생성자 체이닝을 사용하자 </p><ul class="list _ul" id="f3c9a89e_161"><li class="list__item" id="f3c9a89e_162"><p>생성자 안에서 기본 생성자 추가</p></li></ul></li></ul></li></ul></li></ul></section><section class="chapter"><h3 id="f3c9a89e_163" data-toc="f3c9a89e_163">표준 클래스에 대한 의존은 해롭지 않다</h3></section><section class="chapter"><h3 id="f3c9a89e_164" data-toc="f3c9a89e_164">컨텍스트 확장하기</h3></section><section class="chapter"><h3 id="f3c9a89e_165" data-toc="f3c9a89e_165">조합 가능한 행동</h3></section></section><div class="last-modified">Last modified: 22 2월 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="ch-7.html" class="navigation-links__prev">ch.7</a><a href="ch-9.html" class="navigation-links__next">ch.9</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>